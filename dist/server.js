!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=10)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-dom/server")},function(e){e.exports={games:[{name:"Starburst",description:"Starburst is a high paced slot with some nice new features including a Starburst Wild feature. It has 5-reels and 10-bet lines and Traditional Wilds are replaced with an innovative new Starburst Wild which appear on reels 2, 3 or 4 and expand over the entire reel and remain in place for up to 3 re-spins giving you a much better chance of hitting a HUGE win!",code:"starburst",icon:"images/game-icon/starburst.jpg",categoryIds:[0,2]},{name:"Jack Hammer",description:"Jack Hammer is a 25-line, 3-row video slot using 15 independent reels set in the gritty, glamorous underworld of a crime fighting private eye.The game features Sticky Wins, Free Spins and Wild Substitutions.",code:"jackhammer",icon:"images/game-icon/jackhammer.jpg",categoryIds:[0,1]},{name:"Jack and the Beanstalk",description:"We is proud to present Jack and the Beanstalk. This game has a new feature called walking wilds which you will find in the main gameplay of this amazing game When a wild symbol is placed on the reels it will travel one reel at a time unti it leaves the left most reel, hence the name walking wilds! There are also in game free spins, where the main feature is to collect keys to unlock the different wild functionalities.",code:"jackandbeanstalk",icon:"images/game-icon/jackandbeanstalk.jpg",categoryIds:[0,2,1]},{name:"Dead or Alive",description:"The Elements slot has an Avalanche meter which increases by one for each successive fall until it reaches the maximum of 4. After 4 successive Avalanches one of the 4 Free Falls Storm modes is triggered. These are the Fire Storm mode, Air Storm mode, Earth Storm mode, and Water Storm mode. The colours of the Avalanche meter match the leading element in the current game round.",code:"deadoralive",icon:"images/game-icon/deadoralive.jpg",categoryIds:[0,2]},{name:"Twin Spin",description:"The Twin Spin video slot has a Las Vegas theme brought into the 21st Century! Each spin starts with identical, adjacent twin reels that are linked together. During the spin the twin reels can expand to become triplet, quadruplet or even quintuplet reels. The unique reel synchronising and linking feature that appears on every single spin and the 243 ways to win makes for massive payouts!",code:"twinspin",icon:"images/game-icon/twinspin.jpg",categoryIds:[0,1]}],categories:[{id:0,name:"ALL"},{id:1,name:"VIDEO SLOTS"},{id:2,name:"SLOT MACHINES"}]}},function(e,t){var n={rebecka:{name:"Rebecka Awesome",avatar:"images/avatar/rebecka.jpg",event:"Last seen gambling on Starburst.",password:"secret"},eric:{name:"Eric Beard",avatar:"images/avatar/eric.jpg",event:"I saw you won 500 SEK last time!",password:"dad"},stoffe:{name:"Stoffe Rocker",avatar:"images/avatar/stoffe.jpg",event:"Your are a rock star",password:"rock"}};e.exports=function(e,t,a){if("POST"===e.method){if("/login"===e.path){console.log("rawbody",e.body);var r=JSON.parse(e.body),o=r.username,i=r.password;if(console.log(o),o in n&&n[o].password===i){var s=Object.assign({},n[o],{username:o});delete s.password,t.status(200).json({status:"success",player:s})}else t.status(400).json({status:"fail",error:"player does not exist or wrong password"})}else if("/logout"===e.path){JSON.parse(e.body).username in n?t.status(200).json({status:"success"}):t.status(400).json({status:"fail",error:"Username do not match!"})}}else a()}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("cors")},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),i=n(1),s=function(){return r.a.createElement("div",{className:"logo-container"},r.a.createElement("div",{className:"logo"}))},c=function(e){return r.a.createElement("div",{className:"btn "+e.btnClass,onClick:e.onClick},e.children)},l="http://localhost:3000",u=n(3),m=n.n(u);function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getGameData",value:function(){return m.a.get(this.getUrl("game-data"))}},{key:"login",value:function(e){return m.a.post(this.getUrl("login"),e)}},{key:"logout",value:function(e){return m.a.post(this.getUrl("logout"),e)}},{key:"getUrl",value:function(e){return"".concat(l,"/").concat(e)}}],(n=null)&&d(t.prototype,n),a&&d(t,a),e}(),g=function(e){return r.a.createElement("div",{className:"profile "+e.className},e.player?r.a.createElement("div",null,r.a.createElement("div",{className:"avatar-wrapper"},r.a.createElement("img",{src:f.getUrl(e.player.avatar),className:"avatar"}),r.a.createElement("div",{className:"profile-detail"},r.a.createElement("div",{className:"bold"},e.player.name),r.a.createElement("div",{className:"state"},e.player.event)),r.a.createElement("div",{className:"clear"})),r.a.createElement(c,{btnClass:"arrow-left margin-top-10",onClick:e.onLogout},"Log Out")):r.a.createElement(c,{btnClass:"arrow-left margin-top-10",onClick:e.onLogin},"Log In"))},h=function(e){var t={},n=function(){e.onSearch(t.value)};return r.a.createElement("div",{className:"search-box "+e.className},r.a.createElement("input",{type:"text",placeholder:"search game",ref:function(e){t=e},onChange:n}),r.a.createElement("i",{className:"fas fa-search",onClick:n}))},v=function(e){return r.a.createElement("div",{className:"list-wrapper"},r.a.createElement("div",{className:"list-title bold"},e.title),r.a.createElement("div",{className:"content"},e.children))},y=function(e){return r.a.createElement("div",{className:"game-item"},r.a.createElement("img",{src:f.getUrl(e.data.icon),className:"pull-left"}),r.a.createElement("div",{className:"content pull-left"},r.a.createElement("div",{className:"title bold"},e.data.name),r.a.createElement("div",{className:"description"},e.data.description),r.a.createElement(c,{btnClass:"pull-right"},"Play")),r.a.createElement("div",{className:"clear"}))},b=function(e){return r.a.createElement("div",{className:"game-list"},e.items.map(function(e,t){return r.a.createElement(y,{key:t,data:e})}))},w=function(e){return r.a.createElement("div",{className:"categories-list"},e.items.map(function(t,n){return r.a.createElement("div",{key:n,className:"category-item bold",onClick:function(){e.categoryChange(t)}},t.name)}))};"undefined"!=typeof window&&window._GAMES?(p=window._GAMES,delete window._GAMES):p={};var E=function(e){alert(e.response.data.error)},S=Object(i.connect)(null,function(e){return{login:function(t){e(function(e){return function(t){f.login(e).then(function(e){t({type:"login",payload:e.data.player})}).catch(E)}}(t))}}})(function(e){var t,n;return r.a.createElement("div",{className:"login-form-overlay"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"username",ref:function(e){t=e}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"password",ref:function(e){n=e}})),r.a.createElement("div",null,r.a.createElement(c,{btnClass:"pull-right",onClick:function(){e.login({username:t.value,password:n.value})}},"Login"),r.a.createElement(c,{btnClass:"pull-right",onClick:e.onCancel},"Cancel"),r.a.createElement("div",{className:"clear"}))))});function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(a=C(t).call(this))||"object"!==k(a)&&"function"!=typeof a?O(n):a).state={currentCategory:void 0,searchStr:void 0,showLoginForm:!1},e.onSearch=e.onSearch.bind(O(O(e))),e.onCategoryChange=e.onCategoryChange.bind(O(O(e))),e.showLoginForm=e.showLoginForm.bind(O(O(e))),e.logOut=e.logOut.bind(O(O(e))),e}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r.a.Component),n=t,(a=[{key:"showLoginForm",value:function(){this.setState({showLoginForm:!0})}},{key:"onSearch",value:function(e){this.setState({searchStr:e})}},{key:"onCategoryChange",value:function(e){this.setState({currentCategory:e})}},{key:"logOut",value:function(){this.props.logout(this.props.userInfo)}},{key:"filterGames",value:function(e,t,n){return t||n?e.filter(function(e){return n?-1!==e.name.toLowerCase().indexOf(n.toLowerCase()):-1!==e.categoryIds.indexOf(t.id)}):e}},{key:"componentWillReceiveProps",value:function(e){e.userInfo&&this.setState({showLoginForm:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(g,{className:"pull-left",player:this.props.userInfo,onLogin:this.showLoginForm,onLogout:this.logOut}),r.a.createElement(h,{className:"pull-right margin-top-10",onSearch:this.onSearch}),r.a.createElement("div",{className:"clear"}),r.a.createElement("div",null,r.a.createElement("div",{style:{width:"80%"},className:"pull-left"},r.a.createElement(v,{title:"Games"},r.a.createElement(b,{items:this.filterGames(this.props.games,this.state.currentCategory,this.state.searchStr)}))),r.a.createElement("div",{style:{width:"20%"},className:"pull-left"},r.a.createElement(v,{title:"Categories"},r.a.createElement(w,{items:this.props.categories,categoryChange:this.onCategoryChange}))),r.a.createElement("div",{className:"clear"})))),this.state.showLoginForm&&!this.props.userInfo?r.a.createElement(S,{onCancel:function(){e.setState({showLoginForm:!1})}}):"")}}])&&j(n.prototype,a),o&&j(n,o),t}(),L=Object(i.connect)(function(e){return{userInfo:e.userInfo,games:e.games.games?e.games.games:[],categories:e.games.categories?e.games.categories:[]}},function(e){return{logout:function(t){e(function(e){return function(t){f.logout(e).then(function(e){t({type:"logout"})}).catch(E)}}(t))}}})(x),T=function(e){var t=e.body,n=e.title,a=e.games;return"\n  <!DOCTYPE html>\n  <html>\n    <head>\n      <title>".concat(n,'</title>\n    </head>\n    <body style="margin:0">\n      <div id="app">').concat(t,"</div>\n      <script>\n        window._GAMES = ").concat(JSON.stringify(a),"\n      <\/script>\n      <script src='script/css.js'><\/script>\n      <script src='script/client.js'><\/script>\n    </body>\n  </html>\n")},I=n(2),_=Object(I.combineReducers)({userInfo:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login":return e.payload;default:return null}},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_GAMES":return t.payload;default:return e}}}),P=n(5),A=Object(I.createStore)(_);A.dispatch({type:"RECEIVE_GAMES",payload:P});var F=n(6),q=n(7),G=n(8),M=n(9),R=q();R.use(M()),R.use(q.static("".concat(process.cwd(),"/server"))),R.use("/script",q.static("".concat(process.cwd(),"/dist/public"))),R.use(function(e,t,n){var a=(e.headers["content-type"]||"").split(";")[0];if("text/plain"!=a&&"application/json"!=a)return n();var r="";e.setEncoding("utf8"),e.on("data",function(e){r+=e}),e.on("end",function(){e.body=r,n()})}),R.use(F),R.get("/game-data",function(e,t){t.setHeader("content-type","application/json"),G.createReadStream(process.cwd()+"/server/mock-data.json").pipe(t)}),R.get("/",function(e,t){var n=r.a.createElement(i.Provider,{store:A},r.a.createElement(L,null)),a=Object(o.renderToString)(n);t.send(T({body:a,title:"Server side Rendering with Styled Components",games:P}))}),R.listen(3e3),console.log("Serving at http://localhost:".concat(3e3))}]);